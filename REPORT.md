# Детальный отчет по Assignment 1 (Advanced Frontend React)

Отчет составлен в порядке модулей из задания. Для каждого блока указано, что сделано, почему это нужно и как реализовано.

## Модуль 1. Архитектура и масштабирование React-приложений

### 1) Анализ архитектуры и проблем
- Слои не были разделены: компоненты, контекст и бизнес-логика находились рядом, что усложняет поддержку.
- При переходе на Zustand часть кода оставалась «мертвой».
- Отсутствовала явная структура по фичам и сущностям.

### 2) Проектирование по FSD
Введены слои:
- `app` — композиция приложения, провайдеры, глобальные стили.
- `pages` — экраны (доска и аналитика).
- `widgets` — крупные составные блоки UI.
- `features` — пользовательские сценарии.
- `entities` — доменные сущности и модель данных.
- `shared` — утилиты и базовые компоненты.

**Почему:** FSD снижает связность и ускоряет масштабирование, когда появляются новые фичи.

### 3) Разделение features/entities/shared
- Entities: `Project`, `TaskItem`, `BoardState`, стор и начальные данные.
- Features: создание, редактирование, фильтрация, импорт/экспорт.
- Shared: утилиты (санитайзинг, работа с массивами, роутинг) и общие UI.

### 4) Глобальное состояние
- Zustand с persist.
- Дополнительно реализована проверка структуры для импортируемых данных.

## Модуль 2. Производительность и оптимизация

### 1) Устранение лишних перерисовок
- Мемоизированы вычисления для списка тегов и фильтрации.

### 2) Мемоизация и хуки
- `useMemo` для агрегатов.
- `React.memo` для карточек задач.

### 3) Code Splitting и Lazy Loading
- Страницы грузятся лениво (`React.lazy`), при загрузке показан `PageLoader`.

## Модуль 3. Advanced TypeScript и надежность

### 1) Типизация
- Строгие типы для сущностей и операций стора.

### 2) Типизированные хуки
- Селекторы стора типизированы и не возвращают `unknown`.

### 3) Защита слоя данных
- Валидация данных при импорте JSON.

### 4) Error Boundary
- Добавлен `ErrorBoundary` для предотвращения полного падения UI.

## Модуль 4. Тестирование, безопасность, DevOps

### 1) Unit и Integration тесты
**Unit (store):**
- Санитайзинг входных данных (XSS защита).
- Запрет перемещения задачи в ту же колонку.
- Запрет сохранения пустого заголовка.

**Integration (UI):**
- Фильтрация задач по запросу.
- Inline редактирование заголовка.

Файлы:
- `src/entities/project/model/store.test.ts`
- `src/pages/board/ui/BoardPage.test.tsx`

### 2) E2E тесты
**Playwright:**
- Сценарий добавления задачи, перехода на аналитику и возврата.

Файл:
- `e2e/board.spec.ts`

### 3) XSS
- Ввод санитайзится: удаляются `<` и `>`.
- Импортируемые данные нормализуются.

### 4) CI
- GitHub Actions выполняет lint, unit/integration, build, E2E.
- Файл: `.github/workflows/ci.yml`.

## Итог
- Архитектура организована по FSD.
- Добавлен функционал и аналитика.
- Реализованы тесты всех уровней.
- Встроена защита от XSS.
- Настроен CI.

## Запуск
```bash
npm install
npm run dev
```

## Тесты
```bash
npm run test:run
npm run test:e2e
```
